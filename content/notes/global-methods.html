---
title: Global methods
date: 2019-02-18T13:30:00-06:00  # Schedule page publish date.
    
draft: false
type: docs

bibliography: [../../static/bib/sources.bib]
csl: [../../static/bib/apa.csl]
link-citations: true

menu:
  notes:
    parent: Moving beyond linearity
    weight: 1
---

<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<div id="TOC">
<ul>
<li><a href="#linearity-in-linear-models"><span class="toc-section-number">1</span> Linearity in linear models</a><ul>
<li><a href="#when-to-relax-the-assumption"><span class="toc-section-number">1.1</span> When to relax the assumption</a><ul>
<li><a href="#non-linearity-of-the-data"><span class="toc-section-number">1.1.1</span> Non-linearity of the data</a></li>
<li><a href="#non-constant-variance-of-the-error-terms"><span class="toc-section-number">1.1.2</span> Non-constant variance of the error terms</a></li>
</ul></li>
</ul></li>
<li><a href="#monotonic-transformations"><span class="toc-section-number">2</span> Monotonic transformations</a><ul>
<li><a href="#which-transformation-should-i-use"><span class="toc-section-number">2.1</span> Which transformation should I use?</a></li>
<li><a href="#interpreting-transformed-variables"><span class="toc-section-number">2.2</span> Interpreting transformed variables</a><ul>
<li><a href="#log-transformations"><span class="toc-section-number">2.2.1</span> Log transformations</a></li>
</ul></li>
</ul></li>
<li><a href="#polynomial-regressions"><span class="toc-section-number">3</span> Polynomial regressions</a><ul>
<li><a href="#biden-and-age"><span class="toc-section-number">3.1</span> Biden and age</a></li>
<li><a href="#voter-turnout-and-mental-health"><span class="toc-section-number">3.2</span> Voter turnout and mental health</a></li>
</ul></li>
<li><a href="#step-functions"><span class="toc-section-number">4</span> Step functions</a><ul>
<li><a href="#age-and-voting"><span class="toc-section-number">4.1</span> Age and voting</a></li>
</ul></li>
<li><a href="#session-info"><span class="toc-section-number">5</span> Session Info</a></li>
<li><a href="#references"><span class="toc-section-number">6</span> References</a></li>
</ul>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(tidymodels)
<span class="kw">library</span>(rcfss)
<span class="kw">library</span>(titanic)
<span class="kw">library</span>(knitr)
<span class="kw">library</span>(splines)
<span class="kw">library</span>(ISLR)
<span class="kw">library</span>(lattice)
<span class="kw">library</span>(gam)
<span class="kw">library</span>(here)
<span class="kw">library</span>(patchwork)
<span class="kw">library</span>(margins)

<span class="kw">set.seed</span>(<span class="dv">1234</span>)
<span class="kw">theme_set</span>(<span class="kw">theme_minimal</span>())</code></pre></div>
<div id="linearity-in-linear-models" class="section level1">
<h1><span class="header-section-number">1</span> Linearity in linear models</h1>
<p>Linear models are a commonly used statistical learning method because they are intuitive and easy to interpret. The drawback is that in order to create that intuitiveness and interpretability, linear models also make strong assumptions of a <strong>linear relationship</strong> between the predictor(s) and response variable. It is an approximation, and in the real-world most relationships are not strictly linear. We could turn to more advanced statistical learning methods such as decision trees and support vector machines which do not impose a linear assumption, however conducting inference using those methods is more difficult. Instead, we would like to relax the linearity assumption while still maintaining the interpretability of linear models.</p>
<div id="when-to-relax-the-assumption" class="section level2">
<h2><span class="header-section-number">1.1</span> When to relax the assumption</h2>
<div id="non-linearity-of-the-data" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Non-linearity of the data</h3>
<p>Linear regression models assume the relationship between predictors and the response variable is a straight line. Here I simulate the data generating process:</p>
<p><span class="math display">\[Y = 2 + 3X + \epsilon\]</span></p>
<p>where <span class="math inline">\(\epsilon\)</span> is random error distributed normally <span class="math inline">\(N(0,3)\)</span>.</p>
<p><img src="/notes/global-methods_files/figure-html/sim-linear-1.png" width="672" /></p>
<p>When this assumption holds, the <strong>residuals</strong> of the observations should be distributed normally with an expected error <span class="math inline">\({\mathrm{E}}(\epsilon) = 0\)</span> and not be correlated with the fitted values.</p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/notes/global-methods_files/figure-html/sim-linear-resid-1.png" width="672" /><img src="/notes/global-methods_files/figure-html/sim-linear-resid-2.png" width="672" /></p>
<p>Inferences we draw from the model will be accurate and the accuracy of the model will be high.</p>
<p>However if the relationship is not actually linear, then we should see a discernable pattern in the residuals plot. Now I simulate a data generating process:</p>
<p><span class="math display">\[Y = 2 + 3X + 2X^2 + \epsilon\]</span></p>
<p>with the same distribution of <span class="math inline">\(\epsilon\)</span> and fit a linear model to the data:</p>
<p><span class="math display">\[\hat{Y} = \hat{\beta}_0 + \hat{\beta}_1 X + \epsilon\]</span></p>
<p><img src="/notes/global-methods_files/figure-html/sim-nonlinear-1.png" width="672" /></p>
<p>Now that the assumption no longer holds true, we see a distinct polynomial relationship between the predicted values <span class="math inline">\(\hat{y}_i\)</span> and the residuals <span class="math inline">\((y_i - \hat{y}_i)^2\)</span>.</p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/notes/global-methods_files/figure-html/sim-nonlinear-resid-1.png" width="672" /></p>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/notes/global-methods_files/figure-html/sim-nonlinear-resid-2.png" width="672" /></p>
<p>If we want to draw accurate inferences from the model, we need to relax the linearity assumption in some way.</p>
</div>
<div id="non-constant-variance-of-the-error-terms" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Non-constant variance of the error terms</h3>
<p>Another assumption of linear regression is that the error terms <span class="math inline">\(\epsilon_i\)</span> have a constant variance, <span class="math inline">\(\text{Var}(\epsilon_i) = \sigma^2\)</span>. This is called <strong>homoscedasticity</strong>. Remember that the <a href="/notes/ols-diagnostics/#non-constant-error-variance">standard errors directly rely upon the estimate of this value</a>:</p>
<p><span class="math display">\[\widehat{s.e.}(\hat{\beta}_j) = \sqrt{\hat{\sigma}^{2} (X^{T}X)^{-1}_{jj}}\]</span></p>
<p>If the variances of the error terms are non-constant (aka <strong>heteroscedastic</strong>), our estimates of the parameters <span class="math inline">\(\hat{\beta}\)</span> will still be unbiased because they do not depend on <span class="math inline">\(\sigma^2\)</span>. However our estimates of the standard errors will be inaccurate - they will either be inflated or deflated, leading to incorrect inferences about the statistical significance of predictor variables.</p>
<p>We can uncover homo- or heteroscedasticity through the use of the residual plot. Below is data generated from the process:</p>
<p><span class="math display">\[Y = 2 + 3X + \epsilon\]</span></p>
<p>where <span class="math inline">\(\epsilon\)</span> is random error distributed normally <span class="math inline">\(N(0,1)\)</span>.</p>
<pre><code>## Smoothing formula not specified. Using: y ~ qss(x, lambda = 5)</code></pre>
<pre><code>## Warning in rq.fit.sfn(x, y, tau = tau, rhs = rhs, control = control, ...): tiny diagonals replaced with Inf when calling blkfct</code></pre>
<p><img src="/notes/global-methods_files/figure-html/sim-homo-1.png" width="672" /></p>
<p>Compare this to a linear model fit to the data generating process:</p>
<p><span class="math display">\[Y = 2 + 3X + \epsilon\]</span></p>
<p>where <span class="math inline">\(\epsilon\)</span> is random error distributed normally <span class="math inline">\(N(0,\frac{X}{2})\)</span>. Note that the variance for the error term of each observation <span class="math inline">\(\epsilon_i\)</span> is not constant, and is itself a function of <span class="math inline">\(X\)</span>.</p>
<pre><code>## Smoothing formula not specified. Using: y ~ qss(x, lambda = 5)</code></pre>
<p><img src="/notes/global-methods_files/figure-html/sim-hetero-1.png" width="672" /></p>
<p>We see a distinct funnel-shape to the relationship between the predicted values and the residuals. This is because by assuming the variance is constant, we substantially over or underestimate the actual response <span class="math inline">\(Y_i\)</span> as <span class="math inline">\(X_i\)</span> increases.</p>
</div>
</div>
</div>
<div id="monotonic-transformations" class="section level1">
<h1><span class="header-section-number">2</span> Monotonic transformations</h1>
<p>A <strong>monotonic function</strong> is a function for transforming a set of numbers into a different set of numbers so that the rank order of the original set of numbers is preserved. One major family of monotonic functions is the <strong>ladder of powers</strong>.</p>
<table>
<thead>
<tr class="header">
<th>Transformation</th>
<th>Power</th>
<th><span class="math inline">\(f(X)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cube</td>
<td>3</td>
<td><span class="math inline">\(X^3\)</span></td>
</tr>
<tr class="even">
<td>Square</td>
<td>2</td>
<td><span class="math inline">\(X^2\)</span></td>
</tr>
<tr class="odd">
<td>Identity</td>
<td>1</td>
<td><span class="math inline">\(X\)</span></td>
</tr>
<tr class="even">
<td>Square root</td>
<td><span class="math inline">\(\frac{1}{2}\)</span></td>
<td><span class="math inline">\(\sqrt{X}\)</span></td>
</tr>
<tr class="odd">
<td>Cube root</td>
<td><span class="math inline">\(\frac{1}{3}\)</span></td>
<td><span class="math inline">\(\sqrt[3]{X}\)</span></td>
</tr>
<tr class="even">
<td>Log</td>
<td>0 (sort of)</td>
<td><span class="math inline">\(\log(X)\)</span></td>
</tr>
</tbody>
</table>
<p><img src="/notes/global-methods_files/figure-html/power-ladder-1.png" width="672" /></p>
<ul>
<li>Higher-order power transformations “inflate” large values and “compress” small ones</li>
<li>Lower-order power transformations “compress” large values and “inflate” small ones</li>
</ul>
<p>In order for power transformations to “work”, all the values of <span class="math inline">\(X\)</span> need to be <strong>positive</strong> (remember that <span class="math inline">\(\log(0) = -\infty\)</span>). If you need to, you can adjust <span class="math inline">\(X\)</span> first to ensure it only contains positive values by adding the absolute value of the lowest (negative) value of <span class="math inline">\(X\)</span> (call it <span class="math inline">\(X_l\)</span>), plus some small additional value <span class="math inline">\(\epsilon\)</span> to <span class="math inline">\(X\)</span> itself:</p>
<p><span class="math display">\[X^* = X + (|X_l| + \epsilon)\]</span></p>
<div id="which-transformation-should-i-use" class="section level2">
<h2><span class="header-section-number">2.1</span> Which transformation should I use?</h2>
<p>This depends on the situation. Typically we use these transformations to induce linearity between <span class="math inline">\(Y\)</span> and one or more predictors <span class="math inline">\(X\)</span>. Tukey and Mosteller suggest a “bulging rule” for power transformations to make things more linear:</p>
<p><img src="/notes/global-methods_files/figure-html/bulge-rule-1.png" width="672" /></p>
<p>Notice that you are not limited to transforming your predictors <span class="math inline">\(X\)</span> - <strong>you can also transform the response variable <span class="math inline">\(Y\)</span></strong>. You can use simple scatterplots and residual plots to help determine if a transformation is necessary, but these are not a substitute for <strong>good theory</strong>. Is there a theoretical reason why the relationship should be curvilinear rather than strictly linear? If so, use that as a guide to determine an appropriate transformation.</p>
</div>
<div id="interpreting-transformed-variables" class="section level2">
<h2><span class="header-section-number">2.2</span> Interpreting transformed variables</h2>
<div id="log-transformations" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Log transformations</h3>
<p>Interpreting the transformed variables is relatively straightforward. For instance, let’s use the example of a one-sided log transformation of <span class="math inline">\(Y\)</span>:</p>
<p><span class="math display">\[\log(Y_i) = \beta_0 + \beta_{1}X_i + \epsilon_i\]</span></p>
<p>The expected value for <span class="math inline">\(Y\)</span> is therefore:</p>
<p><span class="math display">\[{\mathrm{E}}(Y) = e^{\beta_0 + \beta_{1}X_i}\]</span></p>
<p>This means that the effect of a one-unit increase in <span class="math inline">\(X\)</span> on the expected value of <span class="math inline">\(Y\)</span> is:</p>
<p><span class="math display">\[\frac{\partial {\mathrm{E}}(Y)}{\partial X} = e^{\beta_1}\]</span></p>
<p>What used to be a strictly linear relationship is now multiplicative (and non-linear). So for instance if <span class="math inline">\(\beta_1 = 0.69\)</span> then <span class="math inline">\(e^{\beta_1} = 2\)</span>. So for every one-unit change in <span class="math inline">\(X\)</span>, we believe the expected value of <span class="math inline">\(Y\)</span> will double. Conversely, if <span class="math inline">\(\beta_1 = -0.69\)</span> then <span class="math inline">\(e^{\beta_1} = 0.5\)</span>, meaning a one-unit increase in <span class="math inline">\(X\)</span> is associated with a decrease in <span class="math inline">\(\hat{Y}\)</span> by about <span class="math inline">\(50\%\)</span>.</p>
<p>The same thing holds true for a regression where <span class="math inline">\(X\)</span> is the transformed variable:</p>
<p><span class="math display">\[Y_i = \beta_0 + \beta_{1} \log(X_i) + \epsilon_i\]</span></p>
<p>Now the expected value of <span class="math inline">\(Y\)</span> varies linearly with the natural log of <span class="math inline">\(X\)</span>. Substantively, this is also a multiplicative relationship but in the “opposite direction”. That is, a multiplicative increase in <span class="math inline">\(X\)</span> has a linear increase on <span class="math inline">\(Y\)</span> of <span class="math inline">\(\beta_1\)</span> magnitude.</p>
<div id="log-log-regressions" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Log-log regressions</h4>
<p>A special case is the instance where both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are logarithmically transformed:</p>
<p><span class="math display">\[\log(Y_i) = \beta_0 + \beta_{1} \log(X_i) + \dots + \epsilon_i\]</span></p>
<p>The parameter <span class="math inline">\(\beta_1\)</span> can be interpreted as the <strong>elasticity</strong> of <span class="math inline">\(Y\)</span> with respect to <span class="math inline">\(X\)</span>:</p>
<p><span class="math display">\[\text{Elasticity}_{YX} = \frac{\% \Delta Y}{\% \Delta X}\]</span></p>
<p>This can be interpreted a few different ways:</p>
<ul>
<li>A direct means of interpreting a nonlinear effect: a one-percent change in <span class="math inline">\(X\)</span> leads to a <span class="math inline">\(\hat{\beta}_1\)</span>-percent change in <span class="math inline">\(Y\)</span>.</li>
<li>A double multiplicative relationship: an increase in <span class="math inline">\(X\)</span> of some multiplicative factor <span class="math inline">\(\delta\)</span> leads to a multiplicative increase in <span class="math inline">\(Y\)</span> equal to <span class="math inline">\(\delta^{\beta_1}\)</span>.</li>
<li>If we have an estimate of <span class="math inline">\(\hat{\beta}_1 = 0.5\)</span> in a log-log regression, and you want to know the effect on the predicted value of <span class="math inline">\(Y\)</span> of tripling <span class="math inline">\(X\)</span>, that effect is equal to <span class="math inline">\(3^{0.5} \approx = 1.73\)</span>. That is, tripling <span class="math inline">\(X\)</span> is associated with an increase in the expected value of <span class="math inline">\(Y\)</span> by a factor of 1.73 (i.e. increase it by 73 percent).</li>
</ul>
</div>
</div>
</div>
</div>
<div id="polynomial-regressions" class="section level1">
<h1><span class="header-section-number">3</span> Polynomial regressions</h1>
<p><strong>Polynomial regression</strong> is a technique we have already discussed at length and is just a special case of monotonic transformations. Rather than fitting the standard linear model:</p>
<p><span class="math display">\[y_i = \beta_0 + \beta_{1}x_{i} + \epsilon_{i}\]</span></p>
<p>we instead fit a polynomial function:</p>
<p><span class="math display">\[y_i = \beta_0 + \beta_{1}x_{i} + \beta_{2}x_i^2 + \beta_{3}x_i^3 + \dots + \beta_{d}x_i^d + \epsilon_i\]</span></p>
<p>As <span class="math inline">\(d\)</span> increases, the linear model’s flexibility increases. We still use ordinary least squares (OLS) regression (or a Normal GLM) to estimate the parameters, which are also interpreted in the same way.</p>
<div id="biden-and-age" class="section level2">
<h2><span class="header-section-number">3.1</span> Biden and age</h2>
<p>Let’s take a look at the Joe Biden feeling thermometer data again and estimate a polynomial regression of the relationship between age and attitudes towards Biden:</p>
<p><span class="math display">\[\text{Biden}_i = \beta_0 + \beta_1 \text{Age} + \beta_2 \text{Age}^2 + \beta_3 \text{Age}^3 + \beta_4 \text{Age}^4\]</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get data</span>
biden &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;static&quot;</span>, <span class="st">&quot;data&quot;</span>, <span class="st">&quot;biden.csv&quot;</span>))</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   biden = col_double(),
##   female = col_double(),
##   age = col_double(),
##   educ = col_double(),
##   dem = col_double(),
##   rep = col_double()
## )</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estimate model</span>
biden_age &lt;-<span class="st"> </span><span class="kw">glm</span>(biden <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(age<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(age<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(age<span class="op">^</span><span class="dv">4</span>), <span class="dt">data =</span> biden)
<span class="kw">tidy</span>(biden_age)</code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   term            estimate   std.error statistic p.value
##   &lt;chr&gt;              &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)  37.5        24.9             1.50   0.133
## 2 age           2.37        2.28            1.04   0.299
## 3 I(age^2)     -0.0833      0.0730         -1.14   0.254
## 4 I(age^3)      0.00122     0.000976        1.25   0.211
## 5 I(age^4)     -0.00000622  0.00000464     -1.34   0.180</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estimate the predicted values and confidence interval</span>
biden_pred &lt;-<span class="st"> </span><span class="kw">augment</span>(biden_age, <span class="dt">newdata =</span> biden) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pred_low =</span> .fitted <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>.se.fit,
         <span class="dt">pred_high =</span> .fitted <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>.se.fit)

<span class="co"># plot the curve</span>
<span class="kw">ggplot</span>(biden_pred, <span class="kw">aes</span>(age)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> biden, <span class="kw">aes</span>(age, biden), <span class="dt">alpha =</span> .<span class="dv">05</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> .fitted)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> pred_low), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> pred_high), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Polynomial regression of Biden feeling thermometer&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;With 95% confidence interval&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted Biden thermometer rating&quot;</span>)</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/biden-age-1.png" width="672" /></p>
<p>When interpreting the model, we don’t look to any individual parameters since they are all based on the same variable. Instead we fit the function to the full range of potential values for age and examine the relationship.</p>
<p>In the figure above I graphed the predicted values with 95% confidence intervals. In the case of ordinary linear regression, this is easy to estimate. The <strong>standard error</strong> is a measure of variance for the estimated parameter and defined by the square root of the diagonal of the variance-covariance matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vcov</span>(biden_age) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> <span class="st">&quot;Variance-covariance matrix of Biden polynomial regression&quot;</span>,
        <span class="dt">digits =</span> <span class="dv">5</span>)</code></pre></div>
<table>
<caption><span id="tab:biden-matrix">Table 3.1: </span>Variance-covariance matrix of Biden polynomial regression</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">(Intercept)</th>
<th align="right">I(age^1)</th>
<th align="right">I(age^2)</th>
<th align="right">I(age^3)</th>
<th align="right">I(age^4)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(Intercept)</td>
<td align="right">620.00316</td>
<td align="right">-56.31558</td>
<td align="right">1.76432</td>
<td align="right">-0.02291</td>
<td align="right">0.00011</td>
</tr>
<tr class="even">
<td>I(age^1)</td>
<td align="right">-56.31558</td>
<td align="right">5.20765</td>
<td align="right">-0.16556</td>
<td align="right">0.00218</td>
<td align="right">-0.00001</td>
</tr>
<tr class="odd">
<td>I(age^2)</td>
<td align="right">1.76432</td>
<td align="right">-0.16556</td>
<td align="right">0.00533</td>
<td align="right">-0.00007</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td>I(age^3)</td>
<td align="right">-0.02291</td>
<td align="right">0.00218</td>
<td align="right">-0.00007</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
</tr>
<tr class="odd">
<td>I(age^4)</td>
<td align="right">0.00011</td>
<td align="right">-0.00001</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
</tr>
</tbody>
</table>
<p>Confidence intervals are typically plus/minus 1.96 times the standard error for the parameter. However for polynomial regression, this is more complicated. Suppose we compute the fit at a particular value of age, <span class="math inline">\(x_0\)</span>:</p>
<p><span class="math display">\[\hat{f}(x_0) = \hat{\beta}_0 + \hat{\beta}_1 x_{0} + \hat{\beta}_2 x_{0}^2 + \hat{\beta}_3 x_{0}^3 + \hat{\beta}_4 x_{0}^4\]</span></p>
<p>What is the variance of the fit for this point, i.e. <span class="math inline">\(\text{Var}(\hat{f}(x_o))\)</span>. The variance is now a function not only of <span class="math inline">\(\hat{\beta}_1\)</span>, but the variance of each of the estimated parameters <span class="math inline">\(\hat{\beta}_j\)</span> as well as the covariances between the pairs of estimated parameters (i.e. the off-diagonal elements). We use all of this information to estimate the <strong>pointwise</strong> standard error of <span class="math inline">\(\hat{f}(x_0)\)</span>, which is the square-root of the variance <span class="math inline">\(\text{Var}(\hat{f}(x_o))\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot marginal effect</span>
<span class="kw">cplot</span>(biden_age, <span class="st">&quot;age&quot;</span>, <span class="dt">dx =</span> <span class="st">&quot;age&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;effect&quot;</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> biden, <span class="kw">aes</span>(<span class="dt">x =</span> age)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Average marginal effect of age&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Marginal effect of age&quot;</span>)</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/biden-margins-1.png" width="672" /></p>
</div>
<div id="voter-turnout-and-mental-health" class="section level2">
<h2><span class="header-section-number">3.2</span> Voter turnout and mental health</h2>
<p>Likewise, we can use polynomial regression for classification problems as well. Consider the mental health and voting data. Let’s estimate a logistic regression model of the relationship between mental health and voter turnout:</p>
<p><span class="math display">\[\Pr(\text{Voter turnout} = \text{Yes} | \text{mhealth}) = \frac{\exp[\beta_0 + \beta_1 \text{mhealth} + \beta_2 \text{mhealth}^2 + \beta_3 \text{mhealth}^3 + \beta_4 \text{mhealth}^4]}{1 + \exp[\beta_0 + \beta_1 \text{mhealth} + \beta_2 \text{mhealth}^2 + \beta_3 \text{mhealth}^3 + \beta_4 \text{mhealth}^4]}\]</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load data</span>
mh &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;static&quot;</span>, <span class="st">&quot;data&quot;</span>, <span class="st">&quot;mental_health.csv&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>na.omit</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   vote96 = col_double(),
##   mhealth_sum = col_double(),
##   age = col_double(),
##   educ = col_double(),
##   black = col_double(),
##   female = col_double(),
##   married = col_double(),
##   inc10 = col_double()
## )</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estimate model</span>
mh_mod &lt;-<span class="st"> </span><span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span>mhealth_sum <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(mhealth_sum<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span>
<span class="st">                </span><span class="kw">I</span>(mhealth_sum<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(mhealth_sum<span class="op">^</span><span class="dv">4</span>), <span class="dt">data =</span> mh,
              <span class="dt">family =</span> binomial)
<span class="kw">tidy</span>(mh_mod)</code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   term              estimate std.error statistic  p.value
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)       1.13      0.132         8.54 1.38e-17
## 2 mhealth_sum       0.294     0.175         1.68 9.31e- 2
## 3 I(mhealth_sum^2) -0.196     0.0623       -3.16 1.60e- 3
## 4 I(mhealth_sum^3)  0.0228    0.00738       3.09 1.97e- 3
## 5 I(mhealth_sum^4) -0.000749  0.000271     -2.76 5.70e- 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># log-odds</span>
## predicted probability
pred_mh &lt;-<span class="st"> </span><span class="kw">cplot</span>(mh_mod, <span class="st">&quot;mhealth_sum&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;prediction&quot;</span>, <span class="dt">n =</span> <span class="dv">101</span>,
                 <span class="dt">type =</span> <span class="st">&quot;link&quot;</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Log-odds of voting&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Mental health&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted log-odds of voting&quot;</span>)</code></pre></div>
<pre><code>##    xvals     yvals     upper     lower
## 1   0.00 1.1257127 1.3841621 0.8672633
## 2   0.16 1.1678451 1.3938555 0.9418347
## 3   0.32 1.2004718 1.4033746 0.9975690
## 4   0.48 1.2241366 1.4126649 1.0356083
## 5   0.64 1.2393715 1.4209389 1.0578042
## 6   0.80 1.2466967 1.4268479 1.0665455
## 7   0.96 1.2466205 1.4289197 1.0643212
## 8   1.12 1.2396395 1.4259493 1.0533298
## 9   1.28 1.2262387 1.4171630 1.0353144
## 10  1.44 1.2068910 1.4022026 1.0115795
## 11  1.60 1.1820578 1.3810354 0.9830802
## 12  1.76 1.1521884 1.3538600 0.9505168
## 13  1.92 1.1177207 1.3210321 0.9144093
## 14  2.08 1.0790805 1.2830109 0.8751502
## 15  2.24 1.0366821 1.2403229 0.8330413
## 16  2.40 0.9909276 1.1935372 0.7883181
## 17  2.56 0.9422078 1.1432475 0.7411681
## 18  2.72 0.8909015 1.0900588 0.6917442
## 19  2.88 0.8373756 1.0345750 0.6401761
## 20  3.04 0.7819853 0.9773882 0.5865824</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## marginal effect
ame_mh &lt;-<span class="st"> </span><span class="kw">cplot</span>(mh_mod, <span class="st">&quot;mhealth_sum&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;effect&quot;</span>,
                 <span class="dt">type =</span> <span class="st">&quot;link&quot;</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Average marginal effect&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Mental health&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Marginal effect of mental health&quot;</span>)

pred_mh <span class="op">+</span>
<span class="st">  </span>ame_mh</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/mhealth-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># probability</span>
## predicted probability
pred_mh &lt;-<span class="st"> </span><span class="kw">cplot</span>(mh_mod, <span class="st">&quot;mhealth_sum&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;prediction&quot;</span>, <span class="dt">n =</span> <span class="dv">101</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Mental health&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<pre><code>##    xvals     yvals     upper     lower
## 1   0.00 0.7550468 0.8028473 0.7072463
## 2   0.16 0.7627553 0.8036541 0.7218565
## 3   0.32 0.7686087 0.8046948 0.7325226
## 4   0.48 0.7727907 0.8058935 0.7396879
## 5   0.64 0.7754546 0.8070700 0.7438392
## 6   0.80 0.7767275 0.8079697 0.7454854
## 7   0.96 0.7767143 0.8083303 0.7450983
## 8   1.12 0.7755013 0.8079376 0.7430649
## 9   1.28 0.7731596 0.8066446 0.7396745
## 10  1.44 0.7697484 0.8043646 0.7351322
## 11  1.60 0.7653176 0.8010553 0.7295799
## 12  1.76 0.7599104 0.7967047 0.7231161
## 13  1.92 0.7535657 0.7913215 0.7158099
## 14  2.08 0.7463199 0.7849294 0.7077105
## 15  2.24 0.7382093 0.7775642 0.6988544
## 16  2.40 0.7292711 0.7692733 0.6892689
## 17  2.56 0.7195454 0.7601152 0.6789756
## 18  2.72 0.7090762 0.7501598 0.6679926
## 19  2.88 0.6979122 0.7394879 0.6563365
## 20  3.04 0.6861078 0.7281906 0.6440251</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## marginal effect
ame_mh &lt;-<span class="st"> </span><span class="kw">cplot</span>(mh_mod, <span class="st">&quot;mhealth_sum&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;effect&quot;</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Average marginal effect&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Mental health&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Marginal effect of mental health&quot;</span>)

pred_mh <span class="op">+</span>
<span class="st">  </span>ame_mh</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/mhealth-2.png" width="672" /></p>
<p>With logistic regression we presume the relationship between <span class="math inline">\(X\)</span> and the log-odds of <span class="math inline">\(Y\)</span> is linear, whereas the relationship between <span class="math inline">\(X\)</span> and the probability of <span class="math inline">\(Y\)</span> is curvilinear, defined by the logit function <span class="math inline">\(\log \left( \frac{\Pr(Y)}{1 - \Pr(Y)} \right)\)</span>. Now with the polynomial terms, even the predicted log-odds relationship is <strong>curvilinear</strong>. Notice that the confidence intervals are narrow for lower mental health scores and larger for higher values. This is because there are fewer individuals with high levels of depression, so the variance is larger around these scores for mental health.</p>
</div>
</div>
<div id="step-functions" class="section level1">
<h1><span class="header-section-number">4</span> Step functions</h1>
<p>Monotonic transformations impose a <strong>global</strong> structure on the non-linear function of <span class="math inline">\(X\)</span>. That is, the function applies across the entire range of <span class="math inline">\(X\)</span>. Instead, we may believe that the non-linear behavior of <span class="math inline">\(X\)</span> is instead a <strong>local</strong> structure that varies across the range of <span class="math inline">\(X\)</span>. We can use <strong>step functions</strong> to avoid imposing a global structure. In step functions, you split the predictor <span class="math inline">\(X\)</span> into <strong>bins</strong> and fit a different constant to each bin. This converts a continuous variable into an <strong>ordered categorical variable</strong>.</p>
<p>We create <span class="math inline">\(c_1, c_2, \dots, c_K\)</span> cutpoints in the range of <span class="math inline">\(X\)</span>, and construct <span class="math inline">\(K + 1\)</span> new variables <span class="math inline">\(C_1(X), C_2(X), \dots, C_K(X)\)</span>. Each of the new variables is an <strong>indicator</strong> or <strong>dummy</strong> variable that returns a 1 if <span class="math inline">\(x_i\)</span> falls within the range of the cutpoints and 0 otherwise. For any given <span class="math inline">\(x_i\)</span>, the sum of these variables will be precisely <span class="math inline">\(1\)</span>. We can then fit the linear regression model to the new indicator variables as predictors:</p>
<p><span class="math display">\[y_i = \beta_0 + \beta_1 C_1 (x_i) + \beta_2 C_2 (x_i) + \dots + \beta_K C_K (x_i) + \epsilon_i\]</span></p>
<div id="age-and-voting" class="section level2">
<h2><span class="header-section-number">4.1</span> Age and voting</h2>
<p>We can fit a piecewise constant regression to the voting data set, regressing age on the probability of voting. Dividing age into 5 bins looks like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plain model</span>
<span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> mh, <span class="dt">family =</span> binomial) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cplot</span>(<span class="st">&quot;age&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;prediction&quot;</span>, <span class="dt">n =</span> <span class="dv">101</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;t&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;No step function&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<pre><code>##    xvals     yvals     upper     lower
## 1  20.00 0.4779743 0.5348983 0.4210502
## 2  20.69 0.4839723 0.5397091 0.4282356
## 3  21.38 0.4899750 0.5445193 0.4354308
## 4  22.07 0.4959806 0.5493293 0.4426319
## 5  22.76 0.5019874 0.5541394 0.4498354
## 6  23.45 0.5079935 0.5589498 0.4570373
## 7  24.14 0.5139974 0.5637610 0.4642338
## 8  24.83 0.5199972 0.5685734 0.4714210
## 9  25.52 0.5259913 0.5733878 0.4785948
## 10 26.21 0.5319779 0.5782046 0.4857512
## 11 26.90 0.5379553 0.5830247 0.4928859
## 12 27.59 0.5439218 0.5878489 0.4999947
## 13 28.28 0.5498757 0.5926781 0.5070733
## 14 28.97 0.5558154 0.5975133 0.5141175
## 15 29.66 0.5617391 0.6023556 0.5211227
## 16 30.35 0.5676453 0.6072061 0.5280845
## 17 31.04 0.5735324 0.6120662 0.5349985
## 18 31.73 0.5793987 0.6169371 0.5418602
## 19 32.42 0.5852426 0.6218202 0.5486650
## 20 33.11 0.5910627 0.6267169 0.5554084</code></pre>
<p><img src="/notes/global-methods_files/figure-html/vote96-step-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># polynomial model</span>
<span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(age, <span class="dt">degree =</span> <span class="dv">5</span>, <span class="dt">raw =</span> <span class="ot">TRUE</span>), <span class="dt">data =</span> mh, <span class="dt">family =</span> binomial) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cplot</span>(<span class="st">&quot;age&quot;</span>, <span class="dt">what =</span> <span class="st">&quot;prediction&quot;</span>, <span class="dt">n =</span> <span class="dv">101</span>, <span class="dt">draw =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> xvals)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> yvals)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;t&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Fifth-order polynomial&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<pre><code>##    xvals     yvals     upper     lower
## 1  20.00 0.3775270 0.5409587 0.2140954
## 2  20.69 0.3942510 0.5328487 0.2556533
## 3  21.38 0.4097247 0.5270330 0.2924163
## 4  22.07 0.4240258 0.5238443 0.3242072
## 5  22.76 0.4372465 0.5234591 0.3510339
## 6  23.45 0.4494879 0.5258358 0.3731400
## 7  24.14 0.4608553 0.5306506 0.3910601
## 8  24.83 0.4714552 0.5373148 0.4055955
## 9  25.52 0.4813920 0.5451109 0.4176732
## 10 26.21 0.4907672 0.5533739 0.4281604
## 11 26.90 0.4996770 0.5616095 0.4377445
## 12 27.59 0.5082122 0.5695194 0.4469051
## 13 28.28 0.5164572 0.5769707 0.4559437
## 14 28.97 0.5244897 0.5839501 0.4650293
## 15 29.66 0.5323804 0.5905223 0.4742385
## 16 30.35 0.5401929 0.5967991 0.4835867
## 17 31.04 0.5479837 0.6029175 0.4930499
## 18 31.73 0.5558023 0.6090232 0.5025813
## 19 32.42 0.5636908 0.6152580 0.5121237
## 20 33.11 0.5716848 0.6217492 0.5216203</code></pre>
<p><img src="/notes/global-methods_files/figure-html/vote96-step-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># stepwise model with 5 intervals</span>
<span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span><span class="kw">cut_interval</span>(age, <span class="dv">5</span>), <span class="dt">data =</span> mh, <span class="dt">family =</span> binomial) <span class="op">%&gt;%</span>
<span class="st">  </span>prediction <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> age)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;t&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;5 intervals&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/vote96-step-3.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># stepwise model with 10 intervals</span>
<span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span><span class="kw">cut_interval</span>(age, <span class="dv">10</span>), <span class="dt">data =</span> mh, <span class="dt">family =</span> binomial) <span class="op">%&gt;%</span>
<span class="st">  </span>prediction <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> age)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;t&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;10 intervals&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/vote96-step-4.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># stepwise model with 25 intervals</span>
<span class="kw">glm</span>(vote96 <span class="op">~</span><span class="st"> </span><span class="kw">cut_interval</span>(age, <span class="dv">25</span>), <span class="dt">data =</span> mh, <span class="dt">family =</span> binomial) <span class="op">%&gt;%</span>
<span class="st">  </span>prediction <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> age)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitted <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>se.fitted), <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;b&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rug</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mh, vote96 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="kw">aes</span>(age), <span class="dt">alpha =</span> .<span class="dv">02</span>, <span class="dt">sides =</span> <span class="st">&quot;t&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;25 intervals&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Predicted probability of voting&quot;</span>)</code></pre></div>
<p><img src="/notes/global-methods_files/figure-html/vote96-step-5.png" width="672" /></p>
<p>The drawback to step functions is unless there are natural breakpoints in the predictors, piecewise-constant functions can easily miss the actual relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.</p>
</div>
</div>
<div id="session-info" class="section level1 toc-ignore">
<h1><span class="header-section-number">5</span> Session Info</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">session_info</span>()</code></pre></div>
<pre><code>## ─ Session info ──────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 3.5.2 (2018-12-20)
##  os       macOS Mojave 10.14.2        
##  system   x86_64, darwin15.6.0        
##  ui       X11                         
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  ctype    en_US.UTF-8                 
##  tz       America/Chicago             
##  date     2019-02-18                  
## 
## ─ Packages ──────────────────────────────────────────────────────────────
##  package       * version    date       lib
##  assertthat      0.2.0      2017-04-11 [2]
##  backports       1.1.3      2018-12-14 [2]
##  base64enc       0.1-3      2015-07-28 [2]
##  bayesplot       1.6.0      2018-08-02 [2]
##  bindr           0.1.1      2018-03-13 [2]
##  bindrcpp      * 0.2.2      2018-03-29 [1]
##  blogdown        0.10       2019-01-09 [1]
##  bookdown        0.9        2018-12-21 [1]
##  broom         * 0.5.1      2018-12-05 [2]
##  callr           3.1.1      2018-12-21 [2]
##  cellranger      1.1.0      2016-07-27 [2]
##  class           7.3-15     2019-01-01 [2]
##  cli             1.0.1      2018-09-25 [1]
##  codetools       0.2-16     2018-12-24 [2]
##  colorspace      1.4-0      2019-01-13 [2]
##  colourpicker    1.0        2017-09-27 [2]
##  crayon          1.3.4      2017-09-16 [2]
##  crosstalk       1.0.0      2016-12-21 [2]
##  data.table      1.12.0     2019-01-13 [2]
##  desc            1.2.0      2018-05-01 [2]
##  devtools        2.0.1      2018-10-26 [1]
##  dials         * 0.0.2      2018-12-09 [1]
##  digest          0.6.18     2018-10-10 [1]
##  dplyr         * 0.7.8      2018-11-10 [1]
##  DT              0.5        2018-11-05 [2]
##  dygraphs        1.1.1.6    2018-07-11 [2]
##  evaluate        0.12       2018-10-09 [2]
##  fansi           0.4.0      2018-10-05 [2]
##  farver          1.1.0      2018-11-20 [1]
##  forcats       * 0.3.0      2018-02-19 [2]
##  foreach       * 1.4.4      2017-12-12 [2]
##  fs              1.2.6      2018-08-23 [1]
##  gam           * 1.16       2018-07-20 [2]
##  generics        0.0.2      2018-11-29 [1]
##  gganimate     * 1.0.0      2019-01-02 [1]
##  ggplot2       * 3.1.0      2018-10-25 [1]
##  ggridges        0.5.1      2018-09-27 [2]
##  glue            1.3.0      2018-07-17 [2]
##  gower           0.1.2      2017-02-23 [2]
##  gridExtra       2.3        2017-09-09 [2]
##  gtable          0.2.0      2016-02-26 [2]
##  gtools          3.8.1      2018-06-26 [2]
##  haven           2.0.0      2018-11-22 [2]
##  here          * 0.1        2017-05-28 [2]
##  hms             0.4.2      2018-03-10 [2]
##  htmltools       0.3.6      2017-04-28 [1]
##  htmlwidgets     1.3        2018-09-30 [2]
##  httpuv          1.4.5.1    2018-12-18 [2]
##  httr            1.4.0      2018-12-11 [2]
##  igraph          1.2.2      2018-07-27 [2]
##  infer         * 0.4.0      2018-11-15 [1]
##  inline          0.3.15     2018-05-18 [2]
##  ipred           0.9-8      2018-11-05 [1]
##  ISLR          * 1.2        2017-10-20 [2]
##  iterators       1.0.10     2018-07-13 [2]
##  janeaustenr     0.1.5      2017-06-10 [2]
##  jsonlite        1.6        2018-12-07 [2]
##  knitr         * 1.21       2018-12-10 [2]
##  labeling        0.3        2014-08-23 [2]
##  later           0.7.5      2018-09-18 [2]
##  lattice       * 0.20-38    2018-11-04 [2]
##  lava            1.6.4      2018-11-25 [2]
##  lazyeval        0.2.1      2017-10-29 [2]
##  lme4            1.1-19     2018-11-10 [2]
##  loo             2.0.0      2018-04-11 [2]
##  lubridate       1.7.4      2018-04-11 [2]
##  magrittr        1.5        2014-11-22 [2]
##  margins       * 0.3.23     2018-05-22 [2]
##  markdown        0.9        2018-12-07 [2]
##  MASS            7.3-51.1   2018-11-01 [2]
##  Matrix          1.2-15     2018-11-01 [2]
##  MatrixModels  * 0.4-1      2015-08-22 [2]
##  matrixStats     0.54.0     2018-07-23 [2]
##  memoise         1.1.0      2017-04-21 [2]
##  mime            0.6        2018-10-05 [1]
##  miniUI          0.1.1.1    2018-05-18 [2]
##  minqa           1.2.4      2014-10-09 [2]
##  modelr          0.1.2      2018-05-11 [2]
##  munsell         0.5.0      2018-06-12 [2]
##  nlme            3.1-137    2018-04-07 [2]
##  nloptr          1.2.1      2018-10-03 [2]
##  nnet            7.3-12     2016-02-02 [2]
##  parsnip       * 0.0.1      2018-11-12 [1]
##  patchwork     * 0.0.1      2018-09-06 [1]
##  pillar          1.3.1      2018-12-15 [2]
##  pkgbuild        1.0.2      2018-10-16 [1]
##  pkgconfig       2.0.2      2018-08-16 [2]
##  pkgload         1.0.2      2018-10-29 [1]
##  plyr            1.8.4      2016-06-08 [2]
##  prediction      0.3.6.1    2018-12-04 [2]
##  prettyunits     1.0.2      2015-07-13 [2]
##  pROC            1.13.0     2018-09-24 [1]
##  processx        3.2.1      2018-12-05 [2]
##  prodlim         2018.04.18 2018-04-18 [2]
##  progress        1.2.0      2018-06-14 [2]
##  promises        1.0.1      2018-04-13 [2]
##  ps              1.3.0      2018-12-21 [2]
##  purrr         * 0.3.0      2019-01-27 [2]
##  quantreg      * 5.38       2018-12-18 [2]
##  R6              2.3.0      2018-10-04 [1]
##  rcfss         * 0.1.5      2019-01-24 [1]
##  Rcpp            1.0.0      2018-11-07 [1]
##  readr         * 1.3.1      2018-12-21 [2]
##  readxl          1.2.0      2018-12-19 [2]
##  recipes       * 0.1.4      2018-11-19 [1]
##  remotes         2.0.2      2018-10-30 [1]
##  reshape2        1.4.3      2017-12-11 [2]
##  rlang           0.3.1      2019-01-08 [1]
##  rmarkdown       1.11       2018-12-08 [2]
##  rpart           4.1-13     2018-02-23 [1]
##  rprojroot       1.3-2      2018-01-03 [2]
##  rsample       * 0.0.4      2019-01-07 [1]
##  rsconnect       0.8.13     2019-01-10 [2]
##  rstan           2.18.2     2018-11-07 [2]
##  rstanarm        2.18.2     2018-11-10 [2]
##  rstantools      1.5.1      2018-08-22 [2]
##  rstudioapi      0.9.0      2019-01-09 [1]
##  rvest           0.3.2      2016-06-17 [2]
##  scales        * 1.0.0      2018-08-09 [1]
##  sessioninfo     1.1.1      2018-11-05 [1]
##  shiny           1.2.0      2018-11-02 [2]
##  shinyjs         1.0        2018-01-08 [2]
##  shinystan       2.5.0      2018-05-01 [2]
##  shinythemes     1.1.2      2018-11-06 [2]
##  SnowballC       0.6.0      2019-01-15 [2]
##  SparseM       * 1.77       2017-04-23 [2]
##  StanHeaders     2.18.0-1   2018-12-13 [2]
##  stringi         1.2.4      2018-07-20 [2]
##  stringr       * 1.3.1      2018-05-10 [2]
##  survival        2.43-3     2018-11-26 [2]
##  testthat        2.0.1      2018-10-13 [2]
##  threejs         0.3.1      2017-08-13 [2]
##  tibble        * 2.0.1      2019-01-12 [2]
##  tidymodels    * 0.0.2      2018-11-27 [1]
##  tidyposterior   0.0.2      2018-11-15 [1]
##  tidypredict     0.3.0      2019-01-10 [1]
##  tidyr         * 0.8.2.9000 2019-02-11 [1]
##  tidyselect      0.2.5      2018-10-11 [1]
##  tidytext        0.2.0      2018-10-17 [1]
##  tidyverse     * 1.2.1      2017-11-14 [2]
##  timeDate        3043.102   2018-02-21 [2]
##  titanic       * 0.1.0      2015-08-31 [2]
##  tokenizers      0.2.1      2018-03-29 [2]
##  tweenr          1.0.1      2018-12-14 [1]
##  usethis         1.4.0      2018-08-14 [1]
##  utf8            1.1.4      2018-05-24 [2]
##  withr           2.1.2      2018-03-15 [2]
##  xfun            0.4        2018-10-23 [1]
##  xml2            1.2.0      2018-01-24 [2]
##  xtable          1.8-3      2018-08-29 [2]
##  xts             0.11-2     2018-11-05 [2]
##  yaml            2.2.0      2018-07-25 [2]
##  yardstick     * 0.0.2      2018-11-05 [1]
##  zoo             1.8-4      2018-09-19 [2]
##  source                              
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.1)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.1)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.1)                      
##  Github (thomasp85/patchwork@7fb35b1)
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.1)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  local                               
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  CRAN (R 3.5.1)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.2)                      
##  Github (tidyverse/tidyr@0b27690)    
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
##  CRAN (R 3.5.0)                      
## 
## [1] /Users/soltoffbc/Library/R/3.5/library
## [2] /Library/Frameworks/R.framework/Versions/3.5/Resources/library</code></pre>
</div>
<div id="references" class="section level1 toc-ignore">
<h1><span class="header-section-number">6</span> References</h1>
<ul>
<li><span class="citation">James et al. (<a href="#ref-james2013introduction">2013</a>)</span></li>
<li><span class="citation">Friedman, Hastie, and Tibshirani (<a href="#ref-friedman2001elements">2001</a>)</span></li>
</ul>
<div id="refs" class="references">
<div id="ref-friedman2001elements">
<p>Friedman, Jerome, Trevor Hastie, and Robert Tibshirani. 2001. <em>The Elements of Statistical Learning</em>. Vol. 1. 10. Springer series in statistics New York, NY, USA: <a href="https://web.stanford.edu/~hastie/ElemStatLearn/" class="uri">https://web.stanford.edu/~hastie/ElemStatLearn/</a>.</p>
</div>
<div id="ref-james2013introduction">
<p>James, Gareth, Daniela Witten, Trevor Hastie, and Robert Tibshirani. 2013. <em>An Introduction to Statistical Learning</em>. Vol. 112. Springer. <a href="http://www-bcf.usc.edu/~gareth/ISL/" class="uri">http://www-bcf.usc.edu/~gareth/ISL/</a>.</p>
</div>
</div>
</div>
